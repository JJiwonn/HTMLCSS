<!DOCTYPE html>
<html>

<head>
    <title>가입 폼 실습</title>
    <script>
        window.addEventListener("load", event => {
            // registerForm을 찾아서 검증 이벤트 연결
            // const frm = document.getElementById("registerForm");
            // const frm = document.forms[0];
            const frm = document.forms["registerForm"]; // 추천방법

            frm.addEventListener("submit", event => {
                // 기본 기능을 막아둔다
                event.preventDefault();

                // 사용자 이름 검증
                if (frm.username.value.trim() === "") {
                    alert("사용자 이름을 입력해주세요");
                    frm.username.focus();
                    return;
                }

                // 사용자 이메일 검증
                if (frm.email.value.trim() === "") {
                    alert("이메일을 입력되지 않았습니다.")
                    frm.email.focus();
                    return;
                }

                // 비밀번호 검증
                if (frm.password.value === "") {
                    alert("비밀번호를 설정하지 않았습니다.");
                    frm.password.focus();
                    return;
                }

                // 비밀번호 확인 검증
                if (frm.password_confirm.value === "") {
                    alert("확인 비밀번호를 설정하지 않았습니다.");
                    frm.password_confirm.focus();
                    return;
                }

                if(frm.password.value !== frm.password_confirm.value) {
                    alert("비밀번호와 확인비밀번호가 일치하지 않습니다.")
                    return;
                }

                // radio 상자의 선택된 값 확인
                let message = frm.gender.value === 'M' ? "남성" : "여성";
                console.log(`${message}를 선택하셨습니다.`);
                
                // checkbox :
                // 가정 : 최소 1개의 체크박스가 선택되어 있어야 한다
                let checkedCnt = 0;
                for (let i = 0; i < frm.fav.length; i++) {
                    if (frm.fav[i].checked) {
                        checkedCnt ++;
                    }
                }

                if(checkedCnt === 0) {
                    alert("최소 음료 1개는 선택해야 합니다.");
                    return;
                }

                // select 태그 선택값
                console.log("select:", frm.telecom);
                console.log("options:", frm.telecom.options);
                console.log(`${frm.telecom.options[frm.telecom.selectedIndex]}을 선택하셨습니다.`);
                
                // 이용약관 동의(terms)
                if (!frm.terms.checked) {
                    alert("이용약관에 동의하세요");
                    return;
                }

                frm.submit();
            });

            // console.log("frm");
            
        })
    </script>
</head>

<body>

    <h1>회원 가입 폼</h1>

    <!-- 가상의 멤버십 서비스를 가정하고 가입 폼을 만들어 봅시다 -->
    <form name = "registerForm"
            id = "registerForm"
            action = "#"
            method="post">
   

</body>

</html>